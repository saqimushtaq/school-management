<div class="login-wrapper">
  <!-- Left Side - Branding -->
  <div class="branding-section">
    <div class="branding-content">
      <div class="school-logo">
        <mat-icon class="logo-icon">school</mat-icon>
      </div>
      <h1 class="brand-title">TaleemTrack</h1>
      <p class="brand-tagline">Empowering Education Through Technology</p>
      <div class="features-list">
        <div class="feature-item">
          <mat-icon>check_circle</mat-icon>
          <span>Complete Student Management</span>
        </div>
        <div class="feature-item">
          <mat-icon>check_circle</mat-icon>
          <span>Advanced Fee Management</span>
        </div>
        <div class="feature-item">
          <mat-icon>check_circle</mat-icon>
          <span>Academic Performance Tracking</span>
        </div>
        <div class="feature-item">
          <mat-icon>check_circle</mat-icon>
          <span>Staff & Payroll Management</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Right Side - Login Form -->
  <div class="login-section">
    <div class="login-container">
      <div class="login-header">
        <h2>Welcome Back</h2>
        <p>Sign in to your account to continue</p>
      </div>

      <mat-card class="login-card">
        <mat-card-content>
          <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
            @if (errorMessage()) {
              <div class="error-alert">
                <mat-icon>error_outline</mat-icon>
                <span>{{ errorMessage() }}</span>
              </div>
            }

            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Username</mat-label>
              <input
                matInput
                formControlName="username"
                placeholder="Enter your username"
                autocomplete="username"
                [disabled]="isLoading()"
              />
              <mat-icon matPrefix>person</mat-icon>
              @if (loginForm.get('username')?.invalid && loginForm.get('username')?.touched) {
                <mat-error>{{ getErrorMessage('username') }}</mat-error>
              }
            </mat-form-field>

            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Password</mat-label>
              <input
                matInput
                [type]="hidePassword() ? 'password' : 'text'"
                formControlName="password"
                placeholder="Enter your password"
                autocomplete="current-password"
                [disabled]="isLoading()"
              />
              <mat-icon matPrefix>lock</mat-icon>
              <button
                mat-icon-button
                matSuffix
                type="button"
                (click)="togglePasswordVisibility()"
                [disabled]="isLoading()"
              >
                <mat-icon>{{ hidePassword() ? 'visibility_off' : 'visibility' }}</mat-icon>
              </button>
              @if (loginForm.get('password')?.invalid && loginForm.get('password')?.touched) {
                <mat-error>{{ getErrorMessage('password') }}</mat-error>
              }
            </mat-form-field>

            <button
              mat-raised-button
              color="primary"
              type="submit"
              class="login-button full-width"
              [disabled]="isLoading()"
            >
              @if (isLoading()) {
                <mat-spinner diameter="20" class="button-spinner"></mat-spinner>
                <span>Signing in...</span>
              } @else {
                <ng-container>
                  <mat-icon>login</mat-icon>
                  <span>Sign In</span>
                </ng-container>
              }
            </button>
          </form>
        </mat-card-content>
      </mat-card>

      <div class="login-footer">
        <p class="copyright">
          <mat-icon>copyright</mat-icon>
          2024 TaleemTrack. All rights reserved.
        </p>
      </div>
    </div>
  </div>
</div>
